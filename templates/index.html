{% extends "layout.html" %}

{% block title %}Wiki-Link - Home{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='homepage.css') }}">
{% endblock %}

{% block content %}
  <div class="home-container">
    <h1>Welcome to the Wiki-Link!</h1>
    <h3 class="main-subtitle">A Wikipedia Navigation Challenge</h3>
    <p class="subtitle">Start at one article, reach another, using only the links within Wikipedia. How direct can your path be?</p>

    <!-- Rules Section -->
    <div class="rules-box">
      <h3>Rules</h3>
      <p class="rules-subtitle">
        Pick some rules to customize your challenge! Hover over the <strong>?</strong> icons for more info.
      </p>
      <ul>
        <li>
          Back Button:
          <div class="rule-group" data-rule="back_rule">
            <span class="rule-option active" data-value="unlimited">Unlimited</span>
            <span class="rule-option" data-value="once">Once</span>
            <span class="rule-option" data-value="disabled">Disabled</span>
          </div>
          <span class="tooltip">?
            <span class="tooltiptext">
              Unlimited: Use back as many times as you like.<br>
              Once: You can press back once.<br>
              Disabled: No going back.
            </span>
          </span>
        </li>
        <li>
          Show Table of Contents:
          <div class="rule-group" data-rule="toc">
            <span class="rule-option" data-value="off">Off</span>
            <span class="rule-option active" data-value="on">On</span>
          </div>
          <span class="tooltip">?
            <span class="tooltiptext">A sidebar with the page sections to help navigate large articles.</span>
          </span>
        </li>
        <li>
          Article Randomness:
          <div class="rule-group" data-rule="difficulty">
            <span class="rule-option active" data-value="easy">Easy</span>
            <span class="rule-option" data-value="hard">Hard</span>
          </div>
          <span class="tooltip">?
            <span class="tooltiptext">Easy: Chosen are from a pool of frequently visited articles.<br>Hard: Fully random articles from anywhere on Wikipedia.</span>
          </span>
        </li>
        <li>
          Peek Button:
          <div class="rule-group" data-rule="peek_rule">
            <span class="rule-option" data-value="off">Off</span>
            <span class="rule-option active" data-value="on">On</span>
          </div>
          <span class="tooltip">?
            <span class="tooltiptext">Unsure of what the target article is?<br>Click peek to view the article while playing.</span>
          </span>
        </li>
      </ul>
    </div>

    <div class="button-container">
      <button id="start-game">Start Game</button>
      <button id="share-link">Invite Friends</button>
    </div>

    <div class="join-game-card">
      <h2>
        <span class="emoji-icon">ðŸ”‘</span>
        Join a Friendâ€™s Game
      </h2>
      <p>Already have a game code? Enter it here to jump in.</p>
      <form id="join-game-form">
        <input
          type="text"
          id="join-game-code"
          name="code"
          placeholder="Enter game code"
          autocomplete="off"
          maxlength="20"
          required
        >
        <button type="submit">Join Game</button>
      </form>
      <p id="join-game-error" class="join-error hidden">Game not found. Double-check the code.</p>
    </div>

    <!-- Share Modal -->
    <div id="share-popup" class="modal hidden">
      <div class="modal-content">
        <h2>
          <span class="emoji-icon">ðŸ”—</span>
          Share this Game
        </h2>
        <p>Copy either the game code or link and send to a friend so they can play the same challenge!</p>
      
        <!-- Game code display (click anywhere in this box to copy just the code) -->
        <div class="share-link-display" id="share-link-click-area">
          <input id="share-full-link" type="text" readonly>
          <span class="share-link-icon" aria-hidden="true">ðŸ“‹</span>
        </div>
      
        <div class="share-actions">
          <!-- This button keeps its original behavior: copy FULL link -->
          <button id="copy-link">Copy Link</button>
        </div>
      
        <button id="share-start" data-token="">Start Game</button>
        <button class="close-share"
                onclick="document.getElementById('share-popup').classList.add('hidden')">
          Close
        </button>
      </div>
    </div>
  </div>
{% endblock %}